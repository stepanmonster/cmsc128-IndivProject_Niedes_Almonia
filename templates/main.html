<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do App</title>
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
</head>
<body>
    <div class="parent">
        <!-- LEFT SIDEBAR -->
        <aside class="left-sidebar">

            <button id="mobile-menu-toggle" class="mobile-menu-btn">‚ò∞</button>
            
            <div class="nav-items">
                <div class="nav-item active" id="nav-personal" title="Personal">
                    <span>üè†</span>
                </div>
                <div class="nav-item" id="nav-collaborative" title="Collaborative">
                    <span>üë•</span>
                </div>
            </div>

            <div class="bottom-nav">
                <button id="left-profile-btn" class="nav-profile-btn">
                    <div class="nav-avatar">
                        <span id="left-profile-initial">U</span>
                    </div>
                </button>
            </div>
        </aside>

        <!-- MAIN SIDEBAR -->
        <aside class="sidebar">
            <!-- Personal View -->
            <div id="personal-view">
                <div class="sidebar-header">
                    <h2>To do</h2>
                    <div class="header-actions">
                        <select id="sort-select">
                            <option value="dateAdded">Date Added</option>
                            <option value="dueDate">Due Date</option>
                            <option value="priority">Priority</option>
                        </select>
                        <button id="add-task-btn">+</button>
                    </div>
                </div>

                <section>
                    <h3>This Week</h3>
                    <ul id="list-week"></ul>
                </section>

                <section>
                    <h3>This Month</h3>
                    <ul id="list-month"></ul>
                </section>

                <section>
                    <h3>Personal</h3>
                    <ul id="list-personal"></ul>
                </section>

                <section>
                    <h3>Done Tasks</h3>
                    <ul id="list-done"></ul>
                </section>
            </div>

            <!-- Collaborative View -->
            <div id="collaborative-view" style="display: none;">
                <div class="sidebar-header">
                    <h2>Collaborative To-Do </h2>
                    <button id="create-list-btn" class="header-btn">+</button>
                </div>

                <div id="collaborative-lists-container">
                    <!-- Lists will be loaded here -->
                </div>
            </div>
        </aside>

        <!-- CALENDAR -->
        <main class="calendar">
            <div id="calendar"></div>
        </main>
    </div>

    <!-- MODALS -->
    <div id="add-task-modal" class="modal-overlay">
        <div class="modal">
            <h2>Add Task</h2>
            <input type="text" id="task-name" placeholder="Task name">
            <select id="task-priority">
                <option value="High">High Priority</option>
                <option value="Mid">Mid Priority</option>
                <option value="Low">Low Priority</option>
            </select>
            <input type="date" id="task-date">
            <input type="time" id="task-time">
            <div class="modal-actions">
                <button id="add-task-cancel">Cancel</button>
                <button id="add-task-confirm">Add</button>
            </div>
        </div>
    </div>

    <div id="rename-task-modal" class="modal-overlay">
        <div class="modal">
            <h2>Edit Task</h2>
            <input type="text" id="rename-task-name" placeholder="Task name">
            <select id="rename-task-priority">
                <option value="High">High Priority</option>
                <option value="Mid">Mid Priority</option>
                <option value="Low">Low Priority</option>
            </select>
            <input type="date" id="rename-task-date">
            <input type="time" id="rename-task-time">
            <div class="modal-actions">
                <button id="rename-task-cancel">Cancel</button>
                <button id="rename-task-confirm">Save</button>
            </div>
        </div>
    </div>

    <div id="delete-task-modal" class="modal-overlay">
        <div class="modal">
            <h2>Delete Task?</h2>
            <p>Are you sure you want to delete this task?</p>
            <div class="modal-actions">
                <button id="delete-task-cancel">Cancel</button>
                <button id="delete-task-confirm">Delete</button>
            </div>
        </div>
    </div>

    <div id="done-task-modal" class="modal-overlay">
        <div class="modal">
            <h2>Mark Task as Done?</h2>
            <p>Do you want to mark this task as done?</p>
            <div class="modal-actions">
                <button id="done-task-cancel">Cancel</button>
                <button id="done-task-confirm">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Create Collaborative List Modal -->
    <div id="create-list-modal" class="modal-overlay">
        <div class="modal">
            <h2>Create Collaborative List</h2>
            <input type="text" id="list-name-input" placeholder="List name (e.g., Team Project)">
            <div class="modal-actions">
                <button id="create-list-cancel">Cancel</button>
                <button id="create-list-confirm" class="collab-modal-btn collab-modal-ok">Create</button>
            </div>
        </div>
    </div>

    <!-- Manage Members Modal -->
    <div id="manage-members-modal" class="modal-overlay" style="display: none;">
        <div class="modal">
            <h2 id="manage-list-name">List: Name</h2>
            
            <!-- Message goes here at top -->
            <div id="member-message" style="margin-bottom: 15px;"></div>
            
            <div class="add-member-section">
                <label>Add member by username:</label>
                <div class="add-member-row">
                    <input type="text" id="member-username-input" placeholder="Enter username">
                    <button id="add-member-btn">Add</button>
                </div>
            </div>
            
            <h2>Members</h2>
            <div id="members-list-container"></div>
            
            <div class="modal-actions">
                <button id="manage-members-close">Close</button>
            </div>
        </div>
    </div>


    <!-- Rename Collaborative List Modal -->
    <div id="rename-list-modal" class="modal-overlay" style="display: none;">
        <div class="modal">
            <h2>Rename List</h2>
            <input type="text" id="rename-list-input" placeholder="List name">
            <div class="modal-actions">
                <button id="rename-list-cancel">Cancel</button>
                <button id="rename-list-confirm" class="collab-modal-btn collab-modal-ok">Save</button>
            </div>
        </div>
    </div>

    <!-- Delete Collaborative List Modal -->
    <div id="delete-list-modal" class="modal-overlay" style="display: none;">
        <div class="modal">
            <h2>Delete List?</h2>
            <p>Are you sure you want to delete this list and all its tasks?</p>
            <div class="modal-actions">
                <button id="delete-list-cancel">Cancel</button>
                <button id="delete-list-confirm" class="collab-modal-btn collab-modal-danger">Delete</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast">
        <span id="toast-message"></span>
        <button id="toast-undo">Undo</button>
    </div>

    <script src="{{ url_for('static', filename='main.js') }}"></script>
    <button id="mobile-add-task-btn" class="mobile-fab">+</button>
</body>
</html>
